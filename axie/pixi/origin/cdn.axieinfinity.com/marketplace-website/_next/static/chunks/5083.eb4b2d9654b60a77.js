(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5083],{69877:function(a){var b=Math.floor,c=Math.random;a.exports=function(a,d){return a+b(c()*(d-a+1))}},83608:function(b,c,a){var d=a(69877),e=a(16612),f=a(18601),g=parseFloat,h=Math.min,i=Math.random;b.exports=function(b,a,c){if(c&&"boolean"!=typeof c&&e(b,a,c)&&(a=c=void 0),void 0===c&&("boolean"==typeof a?(c=a,a=void 0):"boolean"==typeof b&&(c=b,b=void 0)),void 0===b&&void 0===a?(b=0,a=1):(b=f(b),void 0===a?(a=b,b=0):a=f(a)),b>a){var k=b;b=a,a=k}if(c||b%1||a%1){var j=i();return h(b+j*(a-b+g("1e-"+((j+"").length-1))),a)}return d(b,a)}},83838:function(d,b,a){"use strict";a.r(b),a.d(b,{AxieFigure:function(){return l}});var e=a(85893);a(58687),a(80356);var f=a(78297),c=a(83608),g=a.n(c),h=a(67294),i=a(98063),j="action/idle/normal",k=["action/idle/random-01","action/idle/random-02","action/idle/random-03","action/idle/random-04","action/idle/random-05",];PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var l=function(a){var c=a.resource,m=a.figureScale,b=(0,h.useState)(),d=b[0],n=b[1],l=(0,h.useRef)(null),o=(0,h.useRef)(null),p=(0,h.useRef)(),q=function(b){var a,e=.5>g()(0,1,!0);if(!p.current||p.current.isComplete()){if(e||(null===(a=p.current)||void 0===a?void 0:a.animation.name)!==j){var c=b.state.setAnimation(0,j,!1);p.current=c,c.onComplete=function(){q(b)}}else{var d=b.state.setAnimation(0,k[g()(0,k.length-1,!1)],!1);p.current=d,d.onComplete=function(){q(b)}}var f=function(a){var c="action/mix/".concat(a,"-animation");return b.spineData.findAnimation(c)||b.spineData.findAnimation("action/mix/normal-".concat(a,"-animation"))};["body","back","ear","eyes","horn","tail","mouth"].forEach(function(c,d){var a=f(c);a&&b.state.addAnimation(1+d,a.name,!0,0)})}};return(0,h.useEffect)(function(){if(l&&l.current){var h,d=l.current;d.childElementCount>0&&(null===(h=d.lastChild)||void 0===h||h.remove()),n(!0);var i=d.offsetWidth,k=d.offsetHeight,b=new PIXI.Application({transparent:!0,resolution:window.devicePixelRatio,autoStart:!0,width:i,height:k});b.stage.interactive=!1,b.view.style.width="".concat(i,"px"),b.renderer.view.style.touchAction="auto",b.renderer.plugins.interaction.autoPreventDefault=!1,b.view.style.height="".concat(k,"px");var g=new PIXI.loaders.Loader,p=new Map,v=(0,f.getAxieColorPartShift)(a.variant),r=c.json.skins[0].attachments;for(var s in r){var t=r[s];for(var w in t){var e=t[w].path;if(e){var x="https://axiecdn.axieinfinity.com/mixer-stuffs/v2/"+(0,f.getVariantAttachmentPath)(s,e,a.variant,v);if(!p.has(e))try{var u="".concat(a.variant,".").concat(e);p.set(u,e),g.add(u,x)}catch(y){console.log("AxieFigure_SkinAttachments",y)}}}}return g.add("floor","/static/image/floor.png").on("complete",function(){if(b){var c,d=g.resources.floor.texture,a=new PIXI.Sprite(d);a.width=320,a.height=200,a.pivot.set(.5),a.position.set(i/2-160,k-230),a.name="floor",null==b||null===(c=b.stage)||void 0===c||c.addChild(a)}}),g.load(),g.once("complete",function(){var d,e=new PIXI.spine.core.TextureAtlas,f={};p.forEach(function(a,b){f[a]=g.resources[b].texture}),e.addTextureHash(f,!1);var h=new PIXI.spine.core.AtlasAttachmentLoader(e),l=new PIXI.spine.core.SkeletonJson(h),n=l.readSkeletonData(c.json),a=new PIXI.spine.Spine(n);a.name="axie",a.position.set(i/2,k-130),a.scale.set(m||.3),a.pivot.set(-21,0),a.state.setAnimation(0,j,!1).onComplete=function(){q(a)},null==b||null===(d=b.stage)||void 0===d||d.addChild(a)}),b.start(),d.appendChild(b.view),n(!1),function(){o.current&&clearInterval(o.current),b&&b.destroy()}}},[a.figureScale,a.variant,c]),(0,e.jsx)("div",{ref:l,className:"flex items-center justify-center",style:a.style,children:d&&(0,e.jsx)(i.L,{})})}},58:function(){},82639:function(){},43953:function(){},34383:function(){},60611:function(){},57237:function(){},69046:function(){},22458:function(){},57823:function(){},25109:function(){}}])